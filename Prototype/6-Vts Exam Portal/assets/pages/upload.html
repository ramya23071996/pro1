<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Upload</title>
  <link href="https://fonts.googleapis.com/css2?family=Urbanist:ital,wght@0,100..900;1,100..900&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="/assets/css/upload.css">
</head>

<body>
  <div class="container">
    <aside class="sidebar">
      <div class="logo">
        <img src="/assets/images/logo.jpg" alt="VTS Logo">
        <h2>VTS Exam<br>Portal</h2>
      </div>
      <nav>
        <ul>
          <li><span><img src="/assets/images/Overview.png"></span> Overview</li>
          <li><img style="background-color: white;" src="/assets/images/Design.png"><a
              style="text-decoration: none;color: white;" href="/assets/pages/trainees.html">Designing</a></li>
          <li><span style="background-color: white;"><img src="/assets/images/development.jpg"></span><a
              style="text-decoration: none;color: white;" href="/assets/pages/trainees.html">Development</a></li>
          <li class="active"><span style="background-color: white;"><img src="/assets/images/Exam.png"></span><a
              style="text-decoration: none;color:#d5f55c ;" href="/assets/pages/upload.html">Exam</a></li>
          <li><span style="background-color: white;"><img src="/assets/images/result.png"></span> Result</li>
        </ul>
      </nav>
    </aside>
  </div>
  <div class="upload">
    <div class="upload-section">
      <h3>Upload Technical Question Paper (JSON)</h3>
      <div class="upload-box">
        <p>ðŸ“¤<br>Drag and drop your files here<br>or</p>
        <input type="file" id="fileInput" hidden>
        <button onclick="document.getElementById('fileInput').click()">Browse Files</button>
        <p class="supported">Supported formats: PDF, DOC, DOCX (Max: 10MB)</p>
      </div>
    </div>
    <div id="output"></div>
    <div class="upload-section">
      <h3>Upload Practical Question Paper (JSON)</h3>
      <div class="upload-box">
        <p>ðŸ“¤<br>Drag and drop your files here<br>or</p>
        <input type="file" id="fileInput" hidden>
        <button onclick="document.getElementById('fileInput').click()">Browse Files</button>
        <p class="supported">Supported formats: PDF, DOC, DOCX (Max: 10MB)</p>
      </div>
    </div>

    <div id="output"></div>
  </div>

  <script>
    const fileInput = document.getElementById('fileInput');

    fileInput.addEventListener('change', handleFile);

    function handleFile(event) {
      const file = event.target.files[0];
      if (!file) return;

      if (file.type !== 'application/json' && !file.name.endsWith('.json')) {
        alert('Please upload a valid JSON file.');
        return;
      }

      const reader = new FileReader();
      reader.onload = function (e) {
        try {
          const questions = JSON.parse(e.target.result);

          localStorage.setItem('questions', JSON.stringify(questions));

          document.getElementById('output').innerText = JSON.stringify(questions, null, 2);

          window.location.href = 'C:\vscode\projects\prototype 6\assets\pages\exam.html';
        } catch (err) {
          alert("Invalid JSON file format!");
        }
      };
      reader.readAsText(file);
    }
  </script>
</body>

</html>